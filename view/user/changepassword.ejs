<%- include('../layouts/header.ejs') %>
<main class="main" style="margin-top: -70px;">
   
    <div class="login-page bg-image pt-8 pb-8 pt-md-12 pb-md-12 pt-lg-17 pb-lg-17" style="background-color: rgb(255, 255, 255); border-radius: 15px;">
        <div class="container">
            <div class="form-box">
                <div class="form-tab">
                    <ul class="nav nav-pills nav-fill" role="tablist">
                       
                           <h2 class="nav-link">Change Password</h2>
                      
                    </ul>
                    <div class="tab-content">
                        <div id="signin-2" aria-labelledby="signin-tab-2">
                            <form action="/passchange" method="post" id="login-form" onsubmit="return validateForm()">
                                <div class="form-group">
                                    <label for="Change-password">Password (At least 8 characters)</label>
                                    <input type="password" class="form-control" id="Change-password" name="password" >
                                    <div class="error-message" id="Change-password-error"></div>
                                </div>
                            
                                <div class="form-group">
                                    <label for="Change-cpassword">Confirm Password</label>
                                    <input type="password" class="form-control" id="Change-cpassword" name="spassword" >
                                    <div class="error-message" id="Change-cpassword-error"></div>
                                </div>
                            
                                <div class="d-flex justify-content-center mt-4">
                                    <button type="submit" class="btn btn-outline-primary-2">
                                        <span>Submit</span>
                                    </button>
                                </div>
                            </form>
                        </div><!-- .End .tab-pane -->
                      <!-- .End .tab-pane -->
                    </div><!-- End .tab-content -->
                </div><!-- End .form-tab -->
            </div><!-- End .form-box -->
        </div><!-- End .container -->
    </div><!-- End .login-page section-bg -->
</main><!-- End .main -->





<style>
    .error-message {
        color: red;
        font-size: 14px;
        margin-top: 5px;
    }
</style>
<script>
    function validateForm() {
        // Reset error messages
        clearErrors();

        // Get password and confirm password values
        const password = document.getElementById('Change-password').value.trim();
        const confirmPassword = document.getElementById('Change-cpassword').value.trim();

        // Check if passwords meet the criteria
        if (!isValidPassword(password)) {
            showError('Change-password', 'Password must be strong (at least 8 characters, include uppercase, lowercase, digit, and special character).');
            return false;
        }

        // Check if passwords match
        if (password !== confirmPassword) {
            showError('Change-cpassword', 'Passwords do not match.');
            return false;
        }

        return true;
    }

    function isValidPassword(password) {
        // Add your strong password criteria using regular expressions
        const regexUpperCase = /[A-Z]/;
        const regexLowerCase = /[a-z]/;
        const regexDigit = /\d/;
        const regexSpecialChar = /[!@#$%^&*(),.?":{}|<>]/;

        return (
            regexUpperCase.test(password) &&
            regexLowerCase.test(password) &&
            regexDigit.test(password) &&
            regexSpecialChar.test(password) &&
            password.length >= 8
        );
    }

    function showError(inputId, errorMessage) {
        const errorField = document.getElementById(`${inputId}-error`);
        errorField.textContent = errorMessage;
    }

    function clearErrors() {
        const errorFields = document.querySelectorAll('.error-message');
        errorFields.forEach(field => {
            field.textContent = '';
        });
    }
</script>


<%- include('../Layouts/footer.ejs') %>